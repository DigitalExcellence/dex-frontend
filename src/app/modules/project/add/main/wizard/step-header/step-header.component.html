<div class="form-steps-container">
  <ng-container *ngFor="let step of steps | async; let i = index">

    <div class="index-wrapper">
      <div
          (click)="onStepClick(step)"
          [ngClass]="{
        'step-complete': step.isComplete,
        'step-blocked': !step.isComplete &&
        (currentStep | async)?.orderIndex+1 !== step.orderIndex &&
        (currentStep | async)?.orderIndex < step.orderIndex,

        'step-current': (currentStep | async)?.orderIndex === step.orderIndex
      }"
          class="step-bubble"
      >
        {{ i + 1 }}
      </div>
    </div>
    <div *ngIf="i < (steps | async)?.length - 1"
         [ngClass]="{
            'step-complete': step.isComplete &&
            (
              (steps | async)[(steps | async).indexOf(step)+1].isComplete ||
              (steps | async)[(steps | async).indexOf(step)+1].id === (currentStep | async).id
            ),
            'step-current':
            (currentStep | async)?.orderIndex === step.orderIndex
         }"
         class="step-divider">
    </div>
  </ng-container>
</div>
